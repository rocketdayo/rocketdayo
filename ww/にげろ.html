<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ vs ğŸ¦Œ ã‚²ãƒ¼ãƒ </title>
<style>
    body {
        background-color: #f0f0f0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }

    #pineapple {
        font-size: 48px;
        color: yellow;
    }

    #deer {
        position: absolute;
        top: 50px;
        left: 50px;
        font-size: 48px;
        color: brown;
    }

    #coordinates {
        position: fixed;
        top: 10px;
        left: 10px;
        font-size: 16px;
    }
</style>
</head>
<body>
    <div id="pineapple">ğŸ</div>
    <div id="deer">ğŸ¦Œ</div>
    <div id="coordinates">ğŸ¦Œ X: <span id="deerX"></span> Y: <span id="deerY"></span></div>

    <script>
        const pineapple = document.getElementById('pineapple');
        const deer = document.getElementById('deer');
        const deerXDisplay = document.getElementById('deerX');
        const deerYDisplay = document.getElementById('deerY');

        // åˆæœŸä½ç½®
        let pineappleX = 0;
        let pineappleY = 0;
        let deerX = window.innerWidth - 100; // å³ä¸Šã«é…ç½®
        let deerY = 50;

        // ğŸãŒğŸ¦Œã®åº§æ¨™ã«å‘ã‹ã£ã¦ç§»å‹•ã™ã‚‹é–¢æ•°
        function movePineapple() {
            // Calculate direction vector from ğŸ to ğŸ¦Œ
            let dx = deerX - pineappleX;
            let dy = deerY - pineappleY;
            
            // Normalize direction vector
            let length = Math.sqrt(dx * dx + dy * dy);
            dx /= length;
            dy /= length;
            
            // Move ğŸ towards ğŸ¦Œ
            pineappleX += dx * 3; // Adjust speed as needed
            pineappleY += dy * 3; // Adjust speed as needed
            
            // Update ğŸ position
            pineapple.style.transform = `translate(${pineappleX}px, ${pineappleY}px)`;

            // ğŸã®ä½ç½®ã‚’ç”»é¢å†…ã«åˆ¶é™ã™ã‚‹
            pineappleX = clamp(pineappleX, 0, window.innerWidth - pineapple.clientWidth);
            pineappleY = clamp(pineappleY, 0, window.innerHeight - pineapple.clientHeight);

            // ğŸ¦Œã¨ã®å½“ãŸã‚Šåˆ¤å®š
            if (collision(pineappleX, pineappleY, deerX, deerY)) {
                alert('ğŸãŒğŸ¦Œã«æ•ã¾ã£ã¦ã—ã¾ã£ãŸï¼');
                resetGame();
            } else {
                requestAnimationFrame(movePineapple);
            }
        }

        // ğŸ¦ŒãŒé€ƒã’ã‚‹é–¢æ•°
        function fleeDeer() {
            // Calculate direction vector from ğŸ¦Œ to random position
            let targetX = getRandomInt(0, window.innerWidth);
            let targetY = getRandomInt(0, window.innerHeight);
            let dx = targetX - deerX;
            let dy = targetY - deerY;
            
            // Normalize direction vector
            let length = Math.sqrt(dx * dx + dy * dy);
            dx /= length;
            dy /= length;
            
            // Move ğŸ¦Œ away from the target position
            deerX += dx * 2; // Adjust speed as needed
            deerY += dy * 2; // Adjust speed as needed
            
            // Update ğŸ¦Œ position
            deer.style.transform = `translate(${deerX}px, ${deerY}px)`;
            deerXDisplay.textContent = deerX.toFixed(2);
            deerYDisplay.textContent = deerY.toFixed(2);

            // ğŸ¦Œã®ä½ç½®ã‚’ç”»é¢å†…ã«åˆ¶é™ã™ã‚‹
            deerX = clamp(deerX, 0, window.innerWidth - deer.clientWidth);
            deerY = clamp(deerY, 0, window.innerHeight - deer.clientHeight);

            requestAnimationFrame(fleeDeer);
        }

        // å½“ãŸã‚Šåˆ¤å®šé–¢æ•°
        function collision(x1, y1, x2, y2) {
            const dx = x1 - x2;
            const dy = y1 - y2;
            const distance = Math.sqrt(dx * dx + dy * dy);
            return distance < 50; // åŠå¾„50pxä»¥å†…ã«æ¥è§¦ã—ã¦ã„ã‚Œã°å½“ãŸã‚Š
        }

        // ãƒ©ãƒ³ãƒ€ãƒ æ•´æ•°ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // å€¤ã‚’æŒ‡å®šã•ã‚ŒãŸç¯„å›²å†…ã«ã‚¯ãƒ©ãƒ³ãƒ—ã™ã‚‹é–¢æ•°
        function clamp(value, min, max) {
            return Math.min(Math.max(value, min), max);
        }

        // ã‚²ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆé–¢æ•°
        function resetGame() {
            pineappleX = 0;
            pineappleY = 0;
            deerX = window.innerWidth - 100; // å³ä¸Šã«é…ç½®
            deerY = 50;
            pineapple.style.transform = `translate(${pineappleX}px, ${pineappleY}px)`;
            deer.style.transform = `translate(${deerX}px, ${deerY}px)`;
        }

        // ã‚²ãƒ¼ãƒ é–‹å§‹
        movePineapple();
        fleeDeer();
    </script>
</body>
</html>
